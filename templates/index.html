<!DOCTYPE html>
{% load static %}
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Цитаты</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
<header>
        <h1>Цитаты</h1>
        <nav>
            <a href="/">Главная</a> |
            <a href="/top">Топ цитат</a> |
            {% if user.is_authenticated %}
                <a href="/add">Добавить цитату</a> |
                <a href="{% url 'profile' %}">Личный кабинет</a>
                {{ user.username }}
                <a href="{% url 'logout' %}" id="logout-link">Выйти</a>
            {% else %}
            <a href="/login">Войти</a> |
            <a href="/signup">Зарегистрироваться</a>
            {% endif %}
        </nav>
    </header>
{% for message in messages %}
      <li{% if message.tags %} class="{{ message.tags }} " style="list-style: none; color: darkslateblue; margin-top: 10px;"{% endif %}>{{ message }}</li>
{% endfor %}
<div>
    {% block content %}


    {% endblock %}
</div>
<script>
  document.getElementById('logout-link').addEventListener('click', function(event) {
    event.preventDefault();

    if (confirm("Вы действительно хотите выйти?")) {
        fetch("{% url 'logout' %}", {
            method: "POST",
            headers: {
                'X-CSRFToken': '{{ csrf_token }}',
            },
        }).then(() => {
            window.location.href = "/";
        });
    }
});
</script>
</body>
</html>